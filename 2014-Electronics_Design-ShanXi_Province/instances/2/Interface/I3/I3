/***************************************************************
程序功能：学习班作为通信中继，将从RS232端口接收到的数据通过RS485
          端口发送出去
----------------------------------------------------------------
测试说明：用示波器观察RS485端口A、B信号线上的波形
          或者用RS485接收器接收发送的字符。
***************************************************************/
#include  <msp430x14x.h>

#define DRE_out     P3DIR |= BIT3     //连接485芯片的DE，RE端口的IO设置为输出状态
#define DE          P3OUT |= BIT3     //设置485芯片处于发送状态 
#define RE          P3OUT &= ~BIT3    //设置485芯片处于接收状态

void Set_UART1(void);

/****************主函数****************/
void main(void)
{
    WDTCTL = WDTPW + WDTHOLD;                 //关闭看门狗
    
    DRE_out;
    DE;
    Set_UART1();
    
    while (1)
    {
        TXBUF1 = 0xaa; 
        while(!(IFG2 & UTXIFG1));               //等待发送结束 
        IFG2 &= ~UTXIFG1;
    }
}